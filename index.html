<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bright Bears Educare - Tuckshop POS</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="assets/logo.png" />

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Chewy&family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Stylesheet -->
  <link rel="stylesheet" href="css/styles.css?v=6" />
</head>

<body>

  <div class="app-shell">

    <!-- SIDEBAR -->
    <aside id="sidebar" class="sidebar open">

      <div class="sidebar-header">
        <img src="assets/logo.png" alt="Bright Bears Logo" class="sidebar-logo" />
        <div>
          <h2 class="sidebar-title">Bright Bears</h2>
          <p class="sidebar-subtitle">Tuckshop POS</p>
        </div>
      </div>

      <nav class="sidebar-nav">
        <button class="nav-btn active" onclick="switchSection('dashboard', this)">Dashboard</button>
        <button class="nav-btn" onclick="switchSection('settings', this)">Settings</button>
        <button class="nav-btn" onclick="switchSection('preorders', this)">Preorders</button>
        <button class="nav-btn" onclick="switchSection('extra-orders', this)">Extra Orders</button>
      </nav>

    </aside>

    <!-- Sidebar toggle (for small screens) -->
    <button id="sidebar-toggle" class="sidebar-toggle">â˜°</button>

    <!-- MAIN AREA -->
    <main class="main-area">

      <!-- HEADER -->
      <header class="main-header">
        <h1>Bright Bears Educare</h1>
      </header>

      <!-- DASHBOARD -->
      <section id="dashboard" class="section visible">
        <h2 class="section-title">Dashboard</h2>

        <div class="stats-grid">

          <div class="dashboard-charts">

  <div class="chart-card">
    <h3>Preorders by Item (Qty)</h3>
    <div id="chart-preorders-items" class="bar-chart"></div>
  </div>

  <div class="chart-card">
    <h3>Extra Orders by Item (Qty)</h3>
    <div id="chart-extra-items" class="bar-chart"></div>
  </div>

  <div class="chart-card">
    <h3>Revenue Split</h3>
    <div id="chart-revenue-split" class="bar-chart"></div>
  </div>

</div>

          <div class="stat-card">
            <p>Total Items</p>
            <h3 id="stat-total-items">0</h3>
          </div>

          <div class="stat-card">
            <p>Preorders (count)</p>
            <h3 id="stat-total-preorders">0</h3>
          </div>

          <div class="stat-card">
            <p>Extra Orders (count)</p>
            <h3 id="stat-total-extra-orders">0</h3>
          </div>

          <div class="stat-card">
            <p>Coupons Given</p>
            <h3 id="stat-coupons-given">0</h3>
          </div>

          <div class="stat-card">
            <p>Coupons Redeemed</p>
            <h3 id="stat-coupons-redeemed">0</h3>
          </div>

          <div class="stat-card">
            <p>Preorder Stock Remaining</p>
            <h3 id="stat-preorder-remaining">0</h3>
          </div>

          <div class="stat-card">
            <p>Extra Stock Remaining</p>
            <h3 id="stat-extra-remaining">0</h3>
          </div>

          <div class="stat-card">
            <p>Estimated Revenue</p>
            <h3 id="stat-total-revenue">R 0</h3>
          </div>

        </div>
      </section>

      <!-- SETTINGS -->
      <section id="settings" class="section">
        <h2 class="section-title">Settings</h2>

        <form id="item-form" class="form-card">
          <input type="hidden" id="item-id">

          <label for="item-name">Item Name</label>
          <input type="text" id="item-name" required />

          <label for="item-price">Price</label>
          <input type="number" step="0.01" id="item-price" required />

          <label for="item-preorder-stock">Preorder Stock</label>
          <input type="number" id="item-preorder-stock" required />

          <label for="item-extra-stock">Extra Stock</label>
          <input type="number" id="item-extra-stock" required />

          <div class="form-actions">
            <button type="submit" class="primary-btn">Save Item</button>
            <button type="button" id="item-form-reset" class="secondary-btn">Reset</button>
          </div>
        </form>

        <table class="data-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Price</th>
              <th>Preorder Stock</th>
              <th>Preorders Used</th>
              <th>Preorder Remaining</th>
              <th>Extra Stock</th>
              <th>Extra Used</th>
              <th>Extra Remaining</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="items-table-body"></tbody>
        </table>
      </section>

      <!-- PREORDERS -->
      <section id="preorders" class="section">
        <h2 class="section-title">Preorders</h2>

        <button id="btn-add-preorder" class="primary-btn section-action-btn">Add Preorder</button>

        <table class="data-table">
          <thead>
            <tr>
              <th>#</th>
              <th>Name</th>
              <th>Items</th>
              <th>Total Qty</th>
              <th>Total Cost</th>
              <th>Coupon Given</th>
              <th>Redeemed</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="preorders-table-body"></tbody>
        </table>
      </section>

      <!-- EXTRA ORDERS -->
      <section id="extra-orders" class="section">
        <h2 class="section-title">Extra Orders</h2>

        <button id="btn-add-extra" class="primary-btn section-action-btn">Add Extra Order</button>

        <table class="data-table">
          <thead>
            <tr>
              <th>#</th>
              <th>Items</th>
              <th>Total Qty</th>
              <th>Total Cost</th>
              <th>Payment</th>
              <th>Paid?</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="extra-table-body"></tbody>
        </table>
      </section>

    </main>
  </div>

  <!-- PREORDER MODAL -->
  <dialog id="preorder-dialog" class="modal">
    <h3 id="preorder-dialog-title">Add Preorder</h3>

    <form id="preorder-form">
      <input type="hidden" id="preorder-id" />

      <label for="preorder-name">Name</label>
      <input type="text" id="preorder-name" required />

      <div class="line-builder">
        <label for="preorder-item">Item</label>
        <select id="preorder-item" required></select>

       <label for="preorder-qty">Qty</label>
       <input type="number" id="preorder-qty" min="1" />

        <button type="button" id="preorder-add-line-btn" class="secondary-btn">
          Add Item
        </button>
      </div>

      <p id="preorder-stock-warning" class="warning-text"></p>

      <table class="data-table small-table">
        <thead>
          <tr>
            <th>#</th>
            <th>Item</th>
            <th>Qty</th>
            <th>Cost</th>
            <th></th>
          </tr>
        </thead>
        <tbody id="preorder-items-body"></tbody>
      </table>

      <p class="modal-total">
        Total: <span id="preorder-cost">R 0.00</span>
      </p>

      <div class="modal-actions">
        <button type="submit" class="primary-btn">Save</button>
        <button type="button" id="preorder-cancel-btn" class="secondary-btn">Cancel</button>
      </div>
    </form>
  </dialog>

  <!-- EXTRA ORDER MODAL -->
  <dialog id="extra-dialog" class="modal">
    <h3 id="extra-dialog-title">Add Extra Order</h3>

    <form id="extra-form">
      <input type="hidden" id="extra-id" />

      <div class="line-builder">
        <label for="extra-item">Item</label>
        <select id="extra-item" required></select>

        <label for="extra-qty">Qty</label>
        <input type="number" id="extra-qty" min="1" />

        <button type="button" id="extra-add-line-btn" class="secondary-btn">
          Add Item
        </button>
      </div>

      <label for="extra-payment">Payment Method</label>
      <select id="extra-payment" required>
        <option value="Cash">Cash</option>
        <option value="Card">Card</option>
        <option value="Both">Both</option>
      </select>

      <p id="extra-stock-warning" class="warning-text"></p>

      <table class="data-table small-table">
        <thead>
          <tr>
            <th>#</th>
            <th>Item</th>
            <th>Qty</th>
            <th>Cost</th>
            <th></th>
          </tr>
        </thead>
        <tbody id="extra-items-body"></tbody>
      </table>

      <p class="modal-total">
        Total: <span id="extra-cost">R 0.00</span>
      </p>

      <div class="modal-actions">
        <button type="submit" class="primary-btn">Save</button>
        <button type="button" id="extra-cancel-btn" class="secondary-btn">Cancel</button>
      </div>
    </form>
  </dialog>

  <!-- Firebase SDK (compat) -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>

  <!-- Firebase config (creates `db`) -->
  <script src="js/firebase-config.js?v=4"></script>

  <!-- Main app logic -->
  <script src="js/main.js?v=7"></script>
</body>
</html>
